<?xml version="1.0" encoding="UTF-8" ?>
<FindBugsFilter
  xmlns="https://github.com/spotbugs/filter/3.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="https://github.com/spotbugs/filter/3.0.0 https://raw.githubusercontent.com/spotbugs/spotbugs/3.1.0/spotbugs/etc/findbugsfilter.xsd"
>

  <!-- https://spotbugs.readthedocs.io/en/latest/bugDescriptions.html -->
  <Match>
    <Or>
      <Package name="~.*.tmp.*" />
      <Package name="~.*.local.*" />
    </Or>
  </Match>

  <Match>
    <Class name="~.*" />
    <Or>
      <Bug pattern="EI_EXPOSE_REP" />
      <Bug pattern="EI_EXPOSE_REP2" />
      <Bug pattern="MS_EXPOSE_REP" />
    </Or>
  </Match>

  <!-- https://github.com/Alluxio/alluxio/blob/main/build/findbugs/findbugs-exclude.xml -->
  <Match>
    <!--
      DC: Possible double check of field
      DE: Method might ignore exception
      DLS: Dead store to local variable
      Dm: Reliance on default encoding
      DP: Method invoked that should be only be invoked inside a doPrivileged block
      EI: May expose internal representation by returning reference to mutable object
      JLM: Synchronization performed on util.concurrent instance
      Nm: Very confusing method names
      PT: Absolute path traversal in servlet
      PZLA: Consider returning a zero length array rather than null
      RCN: Redundant nullcheck of value known to be null
      RR: Method ignores results of InputStream.skip()
      SBSC: Method concatenates strings using + in a loop
      SIC: Could be refactored into a named static inner class
      UC: Useless non-empty void method
      UPM: Private method is never called
      -->
    <Bug code="DC,DE,DLS,Dm,DP,EI,JLM,Nm,PT,PZLA,RCN,RR,SBSC,SIC,UC,UPM" />
  </Match>

  <Match>
    <!-- This Match uses the BUG_PATTERN for matching.

        URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD: allow unread public/protected variables, but not private ones
        UUF_UNUSED_PUBLIC_OR_PROTECTED_FIELD: allow unused public/protected variables, but not private ones

      -->
    <Or>
      <Bug
        pattern="URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD,UUF_UNUSED_PUBLIC_OR_PROTECTED_FIELD"
      />
      <Bug pattern="NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR" />
      <Bug pattern="NP_PARAMETER_MUST_BE_NONNULL_BUT_MARKED_AS_NULLABLE" />
      <Bug pattern="NP_BOOLEAN_RETURN_NULL" />
      <Bug pattern="NP_NONNULL_RETURN_VIOLATION" />
      <Bug pattern="NP_NULL_ON_SOME_PATH" />
      <Bug pattern="RV_RETURN_VALUE_IGNORED_BAD_PRACTICE" />
      <Bug pattern="SE_BAD_FIELD" />
      <Bug pattern="BC_BAD_CAST_TO_ABSTRACT_COLLECTION" />
      <Bug pattern="REC_CATCH_EXCEPTION" />
      <Bug pattern="UMAC_UNCALLABLE_METHOD_OF_ANONYMOUS_CLASS" />
      <Bug pattern="DB_DUPLICATE_BRANCHES" />
      <Bug pattern="BX_UNBOXING_IMMEDIATELY_REBOXED" />
      <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD" />
      <Bug pattern="CT_CONSTRUCTOR_THROW" />
      <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT" />
      <Bug pattern="SA_LOCAL_SELF_ASSIGNMENT" />
      <Bug pattern="BC_VACUOUS_INSTANCEOF" />
      <Bug pattern="OBL_UNSATISFIED_OBLIGATION" />
      <Bug pattern="DMI_HARDCODED_ABSOLUTE_FILENAME" />
      <Bug pattern="PA_PUBLIC_PRIMITIVE_ATTRIBUTE" />
      <Bug pattern="MS_PKGPROTECT" />
      <Bug pattern="URF_UNREAD_FIELD" />
      <Bug pattern="SING_SINGLETON_IMPLEMENTS_SERIALIZABLE" />
      <Bug pattern="SING_SINGLETON_HAS_NONPRIVATE_CONSTRUCTOR" />
      <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE" />
      <Bug pattern="DMI_RANDOM_USED_ONLY_ONCE" />
    </Or>
  </Match>

  <!-- Skip JMH microbench generated source files -->
  <Match>
    <Package name="~.*jmh_generated.*" />
  </Match>
</FindBugsFilter>
