# yaml-language-server: $schema=https://json.schemastore.org/github-workflow.json
name: Issue Labeled
run-name: Auto create and close issues When specific label is added

on:
  issues:
    types: [labeled]

jobs:
  issue-labeled:
    permissions:
      contents: read
      issues: write # for actions-cool/issues-helper to update issues
      pull-requests: write # for actions-cool/issues-helper to update PRs
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¸ Snapshot Workflow Context
        env:
          CONTEXT_GITHUB: ${{ toJSON(github) }}
        run: echo "$CONTEXT_GITHUB"

      - name: ğŸ¤” status|waiting-reproduction
        if: github.event.label.name == 'status|waiting-reproduction'
        uses: actions-cool/issues-helper@71b62d7da76e59ff7b193904feb6e77d4dbb2777 # v3.7.6
        with:
          actions: "create-comment"
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hello @${{ github.event.issue.user.login }}, Please provide a link or code to that can reproduce the problem you ran into to help us investigate the issue. It will be closed if no further activity occurs. Thank you for your contributions.

            ä½ å¥½ @${{ github.event.issue.user.login }}ï¼Œè¯·æä¾›ä¸€ä¸ªå¯ä»¥é‡ç°æ‚¨é‡åˆ°çš„é—®é¢˜çš„é“¾æ¥æˆ–ä»£ç ä»¥ä¾¿äºæˆ‘ä»¬å¸®ä½ æ’æŸ¥é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰è¿›ä¸€æ­¥çš„æ´»åŠ¨å‘ç”Ÿï¼Œå®ƒå°†è¢«å…³é—­ã€‚æ„Ÿè°¢ä½ çš„è´¡çŒ®ã€‚

            > [what is a minimal reproduction, Why Reproductions are Required?](https://antfu.me/posts/why-reproductions-are-required)
            > [ä»€ä¹ˆæ˜¯æœ€å°åŒ–é‡ç°ï¼Œä¸ºä»€ä¹ˆè¿™æ˜¯å¿…éœ€çš„ï¼Ÿ](https://antfu.me/posts/why-reproductions-are-required-zh)

            ![](https://gw.alipayobjects.com/zos/antfincdn/y9kwg7DVCd/reproduce.gif)

      - name: ğŸ¥´ close|stackoverflow
        if: github.event.label.name == 'close|stackoverflow'
        uses: actions-cool/issues-helper@71b62d7da76e59ff7b193904feb6e77d4dbb2777 # v3.7.6
        with:
          actions: "create-comment,close-issue"
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hello @${{ github.event.issue.user.login }}, this issue has been closed because that's better to ask on [StackOverflow](https://stackoverflow.com).

            ä½ å¥½ @${{ github.event.issue.user.login }}ï¼Œè¿™ä¸ªé—®é¢˜å·²è¢«å…³é—­ï¼Œè¿™ä¸ªé—®é¢˜æ›´é€‚åˆç™¾åº¦æœç´¢æˆ– [StackOverflow](https://stackoverflow.com) æé—®ã€‚

      - name: â¸ Pause for VSCode Debug
        env:
          ACTION_DEBUG_TOKEN: ${{ secrets.ACTION_DEBUG_TOKEN }}
          CONTEXT_GITHUB: ${{ toJSON(github) }}
          CONTEXT_JOB: ${{ toJSON(job) }}
          CONTEXT_STEPS: ${{ toJSON(steps) }}
          CONTEXT_RUNNER: ${{ toJSON(runner) }}
          CONTEXT_MATRIX: ${{ toJSON(matrix) }}
          CONTEXT_NEEDS: ${{ toJSON(needs) }}
          CONTEXT_INPUTS: ${{ toJSON(inputs) }}
        if: env.ACTION_DEBUG_TOKEN != '' && (failure() || vars.ACTION_DEBUG_WORKFLOW == github.workflow)
        uses: fawazahmed0/action-debug-vscode@b86399d1033aab18cf8f962fc7f634f39c9945ec # v3
        with:
          token: ${{ env.ACTION_DEBUG_TOKEN }}
